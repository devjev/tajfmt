\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{tajfmt}[2013/02/16]


%% Encoding
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}


%% Tools For Custom Command
\RequirePackage{xparse}


%% Math Stuff
\RequirePackage{amsmath}
\RequirePackage{amsfonts}


%% Graphics Stuff
\RequirePackage{graphicx}


%% Lengths
\newcommand\TAJTitleWidth{.75\textwidth{}}


%% Fonts
%%% Use Times for roman styles
\RequirePackage{tgpagella}      % Palatino for headings
\RequirePackage{cmbright}       % CM Bright for maths

%%% Use Helvetica as the default font
\RequirePackage[scaled=0.90]{helvet}
\renewcommand*\familydefault{\sfdefault}



%% Document Decoration
\RequirePackage{fancyhdr}
\pagestyle{fancy}      

\RequirePackage{titlesec}

%%% Chapter title.
\NewDocumentCommand\chapterfmt{m}{%
\begin{minipage}[b]{\textwidth}
    \begin{minipage}[b]{30pt}%
      {\sffamily\bfseries\fontsize{48}{48}\selectfont\thechapter}%
    \end{minipage}%
    \quad%
    \begin{minipage}[t]{\TAJTitleWidth}%
      {\rmfamily\fontsize{18}{6}\selectfont#1}%
    \end{minipage}%
\end{minipage}}

\NewDocumentCommand\chapterfmtnn{m}{%
\begin{minipage}[t]{\textwidth}%
    \begin{minipage}[t]{\TAJTitleWidth}%
      {\rmfamily\fontsize{18}{6}\selectfont#1}%
    \end{minipage}%
\end{minipage}}

\titleformat{name=\chapter}[block]{}{}{0ex}{\chapterfmt}
\titleformat{name=\chapter,
numberless=true}[block]{}{}{0ex}{\chapterfmtnn}

%%% Section title.
\NewDocumentCommand\sectionfmt{m}{%
\begin{minipage}[b]{\textwidth}
    \begin{minipage}[b]{30pt}%
      {\sffamily\bfseries\fontsize{14}{14}\selectfont\thesection}%
    \end{minipage}%
    \quad%
    \begin{minipage}[t]{\TAJTitleWidth}%
      {\sffamily\fontsize{14}{14}\selectfont#1}%
    \end{minipage}%
\end{minipage}}

\NewDocumentCommand\sectionfmtnn{m}{%
\begin{minipage}[b]{\textwidth}
    \begin{minipage}[t]{\TAJTitleWidth}%
      {\sffamily\fontsize{14}{14}\selectfont#1}%
    \end{minipage}%
\end{minipage}}

\titleformat{name=\section}[block]{\vspace{2em}}{}{0ex}{\vspace{1ex}\sectionfmt}
\titleformat{name=\section,
numberless=true}[block]{\vspace{2em}}{}{0ex}{\vspace{1ex}\sectionfmtnn}


%%% Sub-Section title.
\NewDocumentCommand\subsectionfmt{m}{%
\begin{minipage}[b]{\textwidth}
    \begin{minipage}[b]{30pt}%
      {\sffamily\bfseries\fontsize{11}{14}\selectfont\thesubsection}%
    \end{minipage}%
    \quad%
    \begin{minipage}[t]{\TAJTitleWidth}%
      {\rmfamily\fontsize{11}{14}\selectfont#1}%
    \end{minipage}%
\end{minipage}}

\NewDocumentCommand\subsectionfmtnn{m}{%
\begin{minipage}[b]{\textwidth}
    \begin{minipage}[t]{\TAJTitleWidth}%
      {\rmfamily\fontsize{11}{14}\selectfont#1}%
    \end{minipage}%
\end{minipage}}

\titleformat{name=\subsection}[block]{\vspace{2em}}{}{0ex}{\vspace{1em}\subsectionfmt}
\titleformat{name=\subsection,
numberless=true}[block]{}{}{0ex}{\vspace{1ex}\subsectionfmtnn}


%% Good verbatim settings for code listings
\RequirePackage[scaled=0.85]{beramono}
\RequirePackage{fancyvrb}
\fvset{fontsize=\normalsize}


%% Lists
\RequirePackage{paralist}       % inline lists


%% Spacing
\RequirePackage{xspace}


%% Custom Commands
%%% Notation for special sets
\newcommand{\naturals}{\mathbb{N}}
\newcommand{\integers}{\mathbb{Z}}
\newcommand{\rationals}{\mathbb{Q}}
\newcommand{\reals}{\mathbb{R}}
\newcommand{\complexns}{\mathbb{C}}


%%% Calculus Notation
%%%% Leibniz Partial Derivative Notation up to 4th order
%\NewDocumentCommand
\newcommand{\di}[2][x]{\frac{\partial#2}{\partial#1}}
\newcommand{\ddi}[2][x]{\frac{\partial^2#2}{\partial#1^2}}
\newcommand{\dddi}[2][x]{\frac{\partial^3#2}{\partial#1^3}}
\newcommand{\ddddi}[2][x]{\frac{\partial^4#2}{\partial#1^4}}

\newcommand{\Di}[2][x]{\frac{\partial}{\partial#1}#2}
\newcommand{\DDi}[2][x]{\frac{\partial^2}{\partial#1^2}#2}
\newcommand{\DDDi}[2][x]{\frac{\partial^3}{\partial#1^3}#2}
\newcommand{\DDDDi}[2][x]{\frac{\partial^4}{\partial#1^4}#2}

%%%% Euler notation
\NewDocumentCommand\df{O{x}m}{\textsc{\rm{D}}_{#1}\big(#2\big)}
\NewDocumentCommand\ddf{O{x}m}{\textsc{\rm{D}}_{#1{}}^{2}\big(#2\big)}
\NewDocumentCommand\dddf{O{x}m}{\textsc{\rm{D}}_{#1{}}^{3}\big(#2\big)}
\NewDocumentCommand\ddddf{O{x}m}{\textsc{\rm{D}}_{#1{}}^{4}\big(#2\big)}

%%%% My shorthand derivative notation
\NewDocumentCommand\ds{O{x}m}{\big(#2\big)_{#1}}
\NewDocumentCommand\dds{O{x}m}{\big(#2\big)_{#1#1}}
\NewDocumentCommand\ddds{O{x}m}{\big(#2\big)_{#1#1#1}}
\NewDocumentCommand\dddds{O{x}m}{\big(#2\big)_{#1#1#1#1}}

%%%% Notation for differentials
\NewDocumentCommand\dif{m}{{\rm{d#1}}}


%%% Linear Algebra Notation
\NewDocumentCommand\mtx{m}{{\boldsymbol{#1}}}